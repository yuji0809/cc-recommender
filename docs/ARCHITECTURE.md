# Architecture Documentation

## æ¦‚è¦

cc-recommender ã¯ã€ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«åŸºã¥ã„ã¦è¨­è¨ˆã•ã‚ŒãŸ MCP ã‚µãƒ¼ãƒãƒ¼ã§ã™ã€‚
å„ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¯æ˜ç¢ºãªè²¬å‹™ã‚’æŒã¡ã€ä¾å­˜é–¢ä¿‚ã®æ–¹å‘ãŒä¸€æ–¹å‘ã«ä¿ãŸã‚Œã¦ã„ã¾ã™ã€‚

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Presentation Layer                       â”‚
â”‚                       (tools/handlers/)                       â”‚
â”‚  - recommend-skills.tool.ts                                  â”‚
â”‚  - search-skills.tool.ts                                     â”‚
â”‚  - get-skill-details.tool.ts                                 â”‚
â”‚  - list-categories.tool.ts                                   â”‚
â”‚  - get-stats.tool.ts                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ depends on
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Business Logic Layer                       â”‚
â”‚                       (services/)                            â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚    Analyzer      â”‚  â”‚   Recommender    â”‚                â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚                â”‚
â”‚  â”‚ - Project        â”‚  â”‚ - Scoring        â”‚                â”‚
â”‚  â”‚   Analyzer       â”‚  â”‚ - Search         â”‚                â”‚
â”‚  â”‚ - Parsers:       â”‚  â”‚ - Formatting     â”‚                â”‚
â”‚  â”‚   - package.json â”‚  â”‚                  â”‚                â”‚
â”‚  â”‚   - requirements â”‚  â”‚                  â”‚                â”‚
â”‚  â”‚   - go.mod       â”‚  â”‚                  â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚    Data Fetchers (fetchers/)        â”‚                  â”‚
â”‚  â”‚  - mcp/, plugins/, skills/           â”‚                  â”‚
â”‚  â”‚  - mcp-fetcher, official-mcp-fetcher  â”‚                  â”‚
â”‚  â”‚  - plugin-fetcher, skill-fetcher     â”‚                  â”‚
â”‚  â”‚  - official-skill-fetcher,           â”‚                  â”‚
â”‚  â”‚    github-topic-search               â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ depends on
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Data Access Layer                         â”‚
â”‚                    (repositories/)                           â”‚
â”‚  - recommendation.repository.ts (with caching)               â”‚
â”‚  - remote-data.repository.ts (CDN/GitHub fetch)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ depends on
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Infrastructure Layer                       â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚   Config     â”‚  â”‚  Utils   â”‚  â”‚  Types   â”‚             â”‚
â”‚  â”‚              â”‚  â”‚          â”‚  â”‚          â”‚             â”‚
â”‚  â”‚ - constants  â”‚  â”‚ - glob   â”‚  â”‚ - domain â”‚             â”‚
â”‚  â”‚ - mappings   â”‚  â”‚   matcherâ”‚  â”‚ - serviceâ”‚             â”‚
â”‚  â”‚ - scoring    â”‚  â”‚          â”‚  â”‚ - raw    â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚          Schemas (Zod)             â”‚                    â”‚
â”‚  â”‚  - tool-schemas.ts                 â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Server Layer                            â”‚
â”‚                      (server/)                               â”‚
â”‚  - mcp-server.ts (setup)                                     â”‚
â”‚  - tool-registry.ts (registration)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ãƒ¬ã‚¤ãƒ¤ãƒ¼è©³ç´°

### 1. Presentation Layer (tools/handlers/)

**è²¬å‹™:**
- MCP ãƒ„ãƒ¼ãƒ«ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å—ã‘å–ã‚‹
- å…¥åŠ›ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆZod ã‚¹ã‚­ãƒ¼ãƒä½¿ç”¨ï¼‰
- Business Logic Layer ã‚’å‘¼ã³å‡ºã™
- ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã—ã¦è¿”ã™

**ãƒ•ã‚¡ã‚¤ãƒ«:**
- `index.ts` - ãƒ„ãƒ¼ãƒ«ã®å…¬é–‹ APIï¼ˆå¤–éƒ¨ã‹ã‚‰ã¯ã“ã‚Œã‚’ä½¿ç”¨ï¼‰
- `recommend-skills.tool.ts` - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆ†æã«åŸºã¥ãæ¨è–¦
- `search-skills.tool.ts` - ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢
- `get-skill-details.tool.ts` - è©³ç´°æƒ…å ±å–å¾—
- `list-categories.tool.ts` - ã‚«ãƒ†ã‚´ãƒªä¸€è¦§
- `get-stats.tool.ts` - çµ±è¨ˆæƒ…å ±

**ä¾å­˜é–¢ä¿‚:**
- Business Logic Layer (services/)
- Schemas (schemas/)
- Types (types/index.ts)

### 2. Business Logic Layer (services/)

**è²¬å‹™:**
- ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã®å®Ÿè£…
- ãƒ‡ãƒ¼ã‚¿ã®å¤‰æ›ãƒ»åŠ å·¥
- ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®å®Ÿè£…

#### 2.1 Analyzer (services/analyzer/)

**è²¬å‹™:**
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ã‚¹ã‚­ãƒ£ãƒ³
- ãƒ•ã‚¡ã‚¤ãƒ«ã®è§£æ
- è¨€èªãƒ»ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãƒ»ä¾å­˜é–¢ä¿‚ã®æ¤œå‡º

**ãƒ•ã‚¡ã‚¤ãƒ«:**
- `project-analyzer.service.ts` - ãƒ¡ã‚¤ãƒ³åˆ†æãƒ­ã‚¸ãƒƒã‚¯
- `parsers/package-json.parser.ts` - Node.js ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè§£æ
- `parsers/requirements-txt.parser.ts` - Python ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè§£æ
- `parsers/go-mod.parser.ts` - Go ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè§£æ

**ä¾å­˜é–¢ä¿‚:**
- Config (file-mappings, constants)
- Types (service-types)

#### 2.2 Recommender (services/recommender/)

**è²¬å‹™:**
- ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®å®Ÿè£…
- æ¨è–¦çµæœã®ç”Ÿæˆ
- æ¤œç´¢æ©Ÿèƒ½
- çµæœã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

**ãƒ•ã‚¡ã‚¤ãƒ«:**
- `recommendation.service.ts` - ãƒ¡ã‚¤ãƒ³æ¨è–¦ãƒ­ã‚¸ãƒƒã‚¯
- `search.service.ts` - æ¤œç´¢æ©Ÿèƒ½
- `scoring/scorer.ts` - ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 
- `quality-scorer.ts` - å“è³ªã‚¹ã‚³ã‚¢ç®—å‡º
- `formatters.ts` - çµæœãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼

**ä¾å­˜é–¢ä¿‚:**
- Config (scoring-config)
- Types (domain-types, service-types)
- Utils (glob-matcher)

#### 2.3 Data Fetchers (services/fetchers/)

**è²¬å‹™:**
- å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã‹ã‚‰ã®æƒ…å ±å–å¾—
- ç”Ÿãƒ‡ãƒ¼ã‚¿ã®å¤‰æ›
- è¤‡æ•°ã‚½ãƒ¼ã‚¹ã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿çµ±åˆ

**ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ»ãƒ•ã‚¡ã‚¤ãƒ«:**
- `mcp/` - MCP ã‚µãƒ¼ãƒãƒ¼å–å¾—
  - `mcp-fetcher.ts` - awesome-mcp-servers ã‹ã‚‰å–å¾—
  - `official-mcp-fetcher.ts` - å…¬å¼ MCP ãƒ¬ã‚¸ã‚¹ãƒˆãƒªã‹ã‚‰å–å¾—
- `plugins/` - ãƒ—ãƒ©ã‚°ã‚¤ãƒ³å–å¾—
  - `plugin-fetcher.ts` - å…¬å¼ãƒãƒ¼ã‚±ãƒƒãƒˆãƒ—ãƒ¬ã‚¤ã‚¹ã‹ã‚‰å–å¾—
- `skills/` - ã‚¹ã‚­ãƒ«å–å¾—
  - `skill-fetcher.ts` - awesome-claude-code ã‹ã‚‰å–å¾—
  - `official-skill-fetcher.ts` - å…¬å¼ã‚¹ã‚­ãƒ«ã‚½ãƒ¼ã‚¹ã‹ã‚‰å–å¾—
  - `github-topic-search.ts` - GitHub ãƒˆãƒ”ãƒƒã‚¯æ¤œç´¢ï¼ˆè‡ªå‹•ç™ºè¦‹ï¼‰

**ä¾å­˜é–¢ä¿‚:**
- Config (official-skills)
- Types (domain-types, raw-types)
- Utils (retry)

### 3. Data Access Layer (repositories/)

**è²¬å‹™:**
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹
- ãƒ‡ãƒ¼ã‚¿ã®ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°
- ãƒ‡ãƒ¼ã‚¿ã®æ°¸ç¶šåŒ–

**ãƒ•ã‚¡ã‚¤ãƒ«:**
- `recommendation.repository.ts` - ãƒ¬ã‚³ãƒ¡ãƒ³ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ»ãƒ•ã‚¡ã‚¤ãƒ«/ãƒªãƒ¢ãƒ¼ãƒˆåˆ‡æ›¿ï¼‰
- `remote-data.repository.ts` - ãƒªãƒ¢ãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿å–å¾—ï¼ˆCDN/GitHub ã® JSONï¼‰

**ç‰¹å¾´:**
- ã‚·ãƒ³ã‚°ãƒ«ãƒˆãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’å®Ÿè£…
- ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã¾ãŸã¯ãƒªãƒ¢ãƒ¼ãƒˆ URL ã‹ã‚‰ã®èª­ã¿è¾¼ã¿
- JSON ãƒ‘ãƒ¼ã‚¹ãƒ»ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

**ä¾å­˜é–¢ä¿‚:**
- Types (domain-types)

### 4. Infrastructure Layer

#### 4.1 Config (config/)

**è²¬å‹™:**
- ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®šã®ç®¡ç†
- å®šæ•°ã®å®šç¾©
- ãƒãƒƒãƒ”ãƒ³ã‚°ãƒ†ãƒ¼ãƒ–ãƒ«ã®æä¾›

**ãƒ•ã‚¡ã‚¤ãƒ«:**
- `constants.ts` - ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å®šæ•°
- `file-mappings.ts` - ãƒ•ã‚¡ã‚¤ãƒ«æ‹¡å¼µå­ã¨è¨€èª/ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®ãƒãƒƒãƒ”ãƒ³ã‚°
- `official-skills.ts` - å…¬å¼ã‚¹ã‚­ãƒ«ã‚½ãƒ¼ã‚¹å®šç¾©ï¼ˆGitHub org/repoãƒ»è‡ªå‹•ç™ºè¦‹æ¡ä»¶ï¼‰
- `scoring-config.ts` - ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã®é‡ã¿ãƒ»é–¾å€¤ãƒ»ä¿‚æ•°

#### 4.2 Utils (utils/)

**è²¬å‹™:**
- å…±é€šãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
- æ±ç”¨ãƒ˜ãƒ«ãƒ‘ãƒ¼

**ãƒ•ã‚¡ã‚¤ãƒ«:**
- `glob-matcher.ts` - Glob ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°

#### 4.3 Types (types/)

**è²¬å‹™:**
- å‹å®šç¾©ã®é›†ç´„
- ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ã®å®šç¾©
- å…¬é–‹ API ã®æä¾›

**ãƒ•ã‚¡ã‚¤ãƒ«:**
- `index.ts` - å‹å®šç¾©ã®å…¬é–‹ APIï¼ˆå¤–éƒ¨ã‹ã‚‰ã¯ã“ã‚Œã‚’ä½¿ç”¨ï¼‰
- `domain-types.ts` - ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ï¼ˆRecommendation, Author, etc.ï¼‰
- `service-types.ts` - ã‚µãƒ¼ãƒ“ã‚¹å±¤ã®å‹ï¼ˆProjectInfo, ScoredRecommendationï¼‰
- `raw-types.ts` - å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿ã®å‹ï¼ˆRawPluginEntry, RawMCPEntry, etc.ï¼‰

#### 4.4 Schemas (schemas/)

**è²¬å‹™:**
- å…¥åŠ›ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚­ãƒ¼ãƒ
- Zod ã‚¹ã‚­ãƒ¼ãƒã®å®šç¾©

**ãƒ•ã‚¡ã‚¤ãƒ«:**
- `tool-schemas.ts` - MCP ãƒ„ãƒ¼ãƒ«ã®å…¥åŠ›ã‚¹ã‚­ãƒ¼ãƒ

### 5. Server Layer (server/)

**è²¬å‹™:**
- MCP ã‚µãƒ¼ãƒãƒ¼ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
- ãƒ„ãƒ¼ãƒ«ã®ç™»éŒ²
- ã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•

**ãƒ•ã‚¡ã‚¤ãƒ«:**
- `mcp-server.ts` - ã‚µãƒ¼ãƒãƒ¼ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã¨èµ·å‹•
- `tool-registry.ts` - ãƒ„ãƒ¼ãƒ«ç™»éŒ²ãƒ­ã‚¸ãƒƒã‚¯

## ä¾å­˜é–¢ä¿‚ã®ãƒ«ãƒ¼ãƒ«

### ãƒ¬ã‚¤ãƒ¤ãƒ¼é–“ã®ä¾å­˜

```
Presentation â†’ Business Logic â†’ Data Access â†’ Infrastructure
                                            â†‘
                                            â”‚
                                         Server
```

### è¨±å¯ã•ã‚Œã‚‹ä¾å­˜

- âœ… Presentation â†’ Business Logic
- âœ… Presentation â†’ Infrastructure (Types, Schemas)
- âœ… Business Logic â†’ Data Access
- âœ… Business Logic â†’ Infrastructure
- âœ… Data Access â†’ Infrastructure
- âœ… Server â†’ Presentation (ãƒ„ãƒ¼ãƒ«ç™»éŒ²ã®ãŸã‚ - handlers/index.ts çµŒç”±)
- âœ… Server â†’ Infrastructure (types/index.ts çµŒç”±)

### ç¦æ­¢ã•ã‚Œã‚‹ä¾å­˜

- âŒ Infrastructure â†’ ä»»æ„ã®ä¸Šä½ãƒ¬ã‚¤ãƒ¤ãƒ¼
- âŒ Data Access â†’ Business Logic
- âŒ Data Access â†’ Presentation
- âŒ Business Logic â†’ Presentation
- âŒ å¾ªç’°ä¾å­˜ï¼ˆã™ã¹ã¦ï¼‰

## ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

### æ¨è–¦ãƒ•ãƒ­ãƒ¼

```
1. User Request
   â†“
2. MCP Tool Handler (recommend-skills.tool.ts)
   - å…¥åŠ›ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ (Zod)
   â†“
3. Project Analyzer (project-analyzer.service.ts)
   - ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚¹ã‚­ãƒ£ãƒ³
   - ãƒ•ã‚¡ã‚¤ãƒ«è§£æ
   - ãƒ‘ãƒ¼ã‚µãƒ¼å‘¼ã³å‡ºã—
   â†“
4. Recommendation Service (recommendation.service.ts)
   - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰å€™è£œå–å¾— (Repository)
   - ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚° (Scorer)
   - ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
   - ã‚½ãƒ¼ãƒˆ
   â†“
5. Formatter (formatters.ts)
   - çµæœãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
   - ã‚°ãƒ«ãƒ¼ãƒ”ãƒ³ã‚°
   â†“
6. Response
```

### ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 

```typescript
// 6æ®µéšã®ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°
1. è¨€èªãƒãƒƒãƒãƒ³ã‚° (é‡ã¿: 5)
   - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹è¨€èªã¨ã®ä¸€è‡´

2. ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãƒãƒƒãƒãƒ³ã‚° (é‡ã¿: 4)
   - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¨ã®ä¸€è‡´

3. ä¾å­˜é–¢ä¿‚ãƒãƒƒãƒãƒ³ã‚° (é‡ã¿: 3)
   - package.json ãªã©ã®ä¾å­˜é–¢ä¿‚ã¨ã®ä¸€è‡´

4. ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚° (é‡ã¿: 2)
   - Glob ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ã‚ˆã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è‡´

5. ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒãƒãƒ³ã‚° (é‡ã¿: 1)
   - èª¬æ˜æ–‡ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã¨ã®ä¸€è‡´

6. å…¬å¼ãƒ–ãƒ¼ã‚¹ãƒˆ (ä¿‚æ•°: 1.3)
   - å…¬å¼ã‚¢ã‚¤ãƒ†ãƒ ã®ã‚¹ã‚³ã‚¢ã‚’ 1.3 å€

7. ã‚¹ã‚³ã‚¢æ­£è¦åŒ–
   - ç”Ÿã‚¹ã‚³ã‚¢ã‚’1-100ç‚¹ã®ç¯„å›²ã«æ­£è¦åŒ–
   - æœ€çµ‚ã‚¹ã‚³ã‚¢ = min(100, max(1, (ç”Ÿã‚¹ã‚³ã‚¢ / 50) Ã— 100))

ã‚¹ã‚³ã‚¢é–¾å€¤ï¼ˆæ­£è¦åŒ–å¾Œï¼‰:
- é«˜é©åˆ: 80-100ç‚¹ (âœ…)
- é©åˆ: 50-79ç‚¹ (ğŸ‘)
- å‚è€ƒ: 20-49ç‚¹ (ğŸ“)
- è¡¨ç¤ºãªã—: 1-19ç‚¹
```

## ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°æˆ¦ç•¥

### Repository ãƒ¬ãƒ™ãƒ«

```typescript
class RecommendationRepository {
  private cache: RecommendationDatabase | null = null;

  async load(): Promise<RecommendationDatabase> {
    if (this.cache) {
      return this.cache;
    }
    // ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰èª­ã¿è¾¼ã¿
    this.cache = loadFromFile();
    return this.cache;
  }
}
```

- åˆå›èª­ã¿è¾¼ã¿å¾Œã€ãƒ¡ãƒ¢ãƒªã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥
- ã‚µãƒ¼ãƒãƒ¼èµ·å‹•æ™‚ã«1åº¦ã ã‘èª­ã¿è¾¼ã¿
- ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰ãªã—ï¼ˆå†èµ·å‹•ãŒå¿…è¦ï¼‰

## ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

### æˆ¦ç•¥

1. **å…¥åŠ›ã‚¨ãƒ©ãƒ¼** - Zod ã«ã‚ˆã‚‹è‡ªå‹•ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
2. **ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼** - try-catch ã§æ•æ‰ã€null/ç©ºé…åˆ—ã‚’è¿”ã™
3. **ãƒ‘ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼** - try-catch ã§æ•æ‰ã€ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°å‡ºåŠ›
4. **äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼** - ä¸Šä½ãƒ¬ã‚¤ãƒ¤ãƒ¼ã«ä¼æ’­

### ä¾‹

```typescript
try {
  const content = await readFile(path, "utf-8");
  return JSON.parse(content);
} catch (error) {
  console.error(`Failed to parse ${path}:`, error);
  return null;
}
```

## ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### ã‚«ãƒãƒ¬ãƒƒã‚¸ç›®æ¨™

æ–°è¦ã‚³ãƒ¼ãƒ‰ã¯é«˜ã„ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’ç¶­æŒã—ã€é‡è¦ãªãƒ­ã‚¸ãƒƒã‚¯ã¯å¿…ãšãƒ†ã‚¹ãƒˆã‚’æ›¸ãã€‚

### ãƒ†ã‚¹ãƒˆç¨®é¡

1. **ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ**
   - å„ã‚µãƒ¼ãƒ“ã‚¹ã®å˜ä½“ãƒ†ã‚¹ãƒˆ
   - ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨

2. **çµ±åˆãƒ†ã‚¹ãƒˆ**
   - è¤‡æ•°ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’çµ„ã¿åˆã‚ã›ãŸãƒ†ã‚¹ãƒˆ
   - å®Ÿéš›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½¿ç”¨

### ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«

- `tests/analyzer/` - åˆ†ææ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆ
- `tests/fetchers/` - ãƒ•ã‚§ãƒƒãƒãƒ£ãƒ¼ã®ãƒ†ã‚¹ãƒˆ
- `tests/recommender/` - æ¨è–¦æ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆ

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### 1. ãƒ•ã‚¡ã‚¤ãƒ«ã‚¹ã‚­ãƒ£ãƒ³

- æœ€å¤§æ·±åº¦: 5
- æœ€å¤§ãƒ•ã‚¡ã‚¤ãƒ«æ•°: 1000
- ã‚¹ã‚­ãƒƒãƒ—ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª: node_modules, .git, dist, build, coverage

### 2. ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°

- æ—©æœŸçµ‚äº†: minScore æœªæº€ã¯å³ã‚¹ã‚­ãƒƒãƒ—
- ã‚½ãƒ¼ãƒˆã¯æœ€å¾Œã«1åº¦ã ã‘
- çµæœæ•°åˆ¶é™: maxResults ã§ã‚¹ãƒ©ã‚¤ã‚¹

### 3. ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°

- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ãƒ¡ãƒ¢ãƒªã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥
- ãƒ•ã‚¡ã‚¤ãƒ« I/O ã‚’æœ€å°åŒ–

## å°†æ¥ã®æ‹¡å¼µãƒã‚¤ãƒ³ãƒˆ

### 1. æ–°ã—ã„ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã®è¿½åŠ 

```typescript
// services/new-source-fetcher.ts
export async function fetchFromNewSource(): Promise<Recommendation[]> {
  // å®Ÿè£…
}
```

### 2. æ–°ã—ã„ãƒ‘ãƒ¼ã‚µãƒ¼ã®è¿½åŠ 

```typescript
// services/analyzer/parsers/cargo-toml.parser.ts
export async function parseCargoToml(
  projectPath: string,
  info: ProjectInfo
): Promise<void> {
  // Rust ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è§£æ
}
```

### 3. æ–°ã—ã„ãƒ„ãƒ¼ãƒ«ã®è¿½åŠ 

```typescript
// tools/handlers/compare-skills.tool.ts
export async function compareSkills(
  input: CompareSkillsInput,
  database: RecommendationDatabase
): Promise<CompareSkillsResult> {
  // ã‚¹ã‚­ãƒ«æ¯”è¼ƒæ©Ÿèƒ½
}
```

## ã¾ã¨ã‚

ã“ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¯ä»¥ä¸‹ã®ç‰¹å¾´ã‚’æŒã¡ã¾ã™:

- âœ… ãƒ¬ã‚¤ãƒ¤ãƒ¼åˆ†é›¢ã«ã‚ˆã‚‹ä¿å®ˆæ€§ã®å‘ä¸Š
- âœ… å˜ä¸€è²¬ä»»åŸå‰‡ã«ã‚ˆã‚‹å¯èª­æ€§ã®å‘ä¸Š
- âœ… ç›´æ¥ã‚¤ãƒ³ãƒãƒ¼ãƒˆã«ã‚ˆã‚‹æ˜ç¢ºãªä¾å­˜é–¢ä¿‚
- âœ… å‹å®‰å…¨æ€§ã®ç¢ºä¿
- âœ… ãƒ†ã‚¹ãƒˆã®å®¹æ˜“æ€§
- âœ… æ‹¡å¼µæ€§ã®ç¢ºä¿

å„ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒæ˜ç¢ºãªè²¬å‹™ã‚’æŒã¡ã€ä¾å­˜é–¢ä¿‚ãŒä¸€æ–¹å‘ã«ä¿ãŸã‚Œã¦ã„ã‚‹ãŸã‚ã€
æ–°æ©Ÿèƒ½ã®è¿½åŠ ã‚„æ—¢å­˜æ©Ÿèƒ½ã®å¤‰æ›´ãŒå®¹æ˜“ã§ã™ã€‚
